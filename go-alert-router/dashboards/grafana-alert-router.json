{
  "title": "Go Alert Router",
  "uid": "alert-router-main",
  "schemaVersion": 39,
  "style": "dark",
  "tags": ["alerts", "router", "devops"],
  "time": { "from": "now-1h", "to": "now" },
  "refresh": "10s",
  "panels": [
    { "type": "stat", "title": "Alertas ingeridos (5m)", "id": 1,
      "gridPos": {"h":4,"w":6,"x":0,"y":0},
      "targets": [ { "expr": "sum(increase(alert_router_ingested_total[5m]))", "refId":"A" } ]
    },
    { "type": "stat", "title": "Descartes (5m)", "id": 2,
      "gridPos": {"h":4,"w":6,"x":6,"y":0},
      "targets": [ { "expr": "sum(increase(alert_router_dropped_total[5m]))", "refId":"A" } ]
    },
    { "type": "stat", "title": "Entregas (5m)", "id": 3,
      "gridPos": {"h":4,"w":6,"x":12,"y":0},
      "targets": [ { "expr": "sum(increase(alert_router_deliveries_total[5m]))", "refId":"A" } ]
    },
    { "type": "stat", "title": "Erros de entrega (5m)", "id": 4,
      "gridPos": {"h":4,"w":6,"x":18,"y":0},
      "targets": [ { "expr": "sum(increase(alert_router_delivery_errors_total[5m]))", "refId":"A" } ]
    },
    { "type": "timeseries", "title":"Ingestão por fonte (alerts/s)", "id":5,
      "gridPos":{"h":8,"w":12,"x":0,"y":4},
      "targets":[{ "expr":"sum by (source) (rate(alert_router_ingested_total[2m]))", "refId":"A", "legendFormat":"{{source}}" }]
    },
    { "type": "timeseries", "title":"Entregas por destino (entregas/s)", "id":6,
      "gridPos":{"h":8,"w":12,"x":12,"y":4},
      "targets":[{ "expr":"sum by (dest) (rate(alert_router_deliveries_total[2m]))", "refId":"A", "legendFormat":"{{dest}}" }]
    },
    { "type": "timeseries", "title":"Drop por razão (drops/s)", "id":7,
      "gridPos":{"h":8,"w":12,"x":0,"y":12},
      "targets":[{ "expr":"sum by (reason) (rate(alert_router_dropped_total[2m]))", "refId":"A", "legendFormat":"{{reason}}" }]
    },
    { "type": "timeseries", "title":"Fila por rota (depth)", "id":8,
      "gridPos":{"h":8,"w":12,"x":12,"y":12},
      "targets":[{ "expr":"alert_router_queue_depth", "refId":"A", "legendFormat":"{{route}}" }]
    }
  ]
}